- id: 'ory:kratos-accounts:anonymous'
  upstream:
    preserve_host: true
    url: 'http://vue-acc-service.default.svc.cluster.local:8080'
  match:
    url: 'https://core.prac.io/<.*>'
    methods:
      - GET
  authenticators:
    - handler: anonymous
  authorizer:
    handler: allow
  mutators:
    - handler: noop
- id: 'ory:kratos-book:protected'
  upstream:
    preserve_host: true
    url: 'http://book-services.default.svc.cluster.local:80'
  match:
    url: 'https://core.prac.io/book/<(?!api/).*>'
    methods:
      - GET
  authenticators:
    - handler: anonymous
  authorizer:
    handler: allow
  mutators:
    - handler: noop
- id: 'ory:kratos-book-api:protected'
  upstream:
    preserve_host: true
    url: 'http://book-services.default.svc.cluster.local:4000'
  match:
    url: 'https://core.prac.io/book/api/<.*>'
    methods:
      - GET
  authenticators:
    - handler: anonymous
  authorizer:
    handler: allow
  mutators:
    - handler: noop
