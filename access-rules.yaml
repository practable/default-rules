- id: 'ory:kratos-accounts:anonymous'
  upstream:
    preserve_host: true
    url: 'http://vue-acc-service.svc.default.cluster.local'
    strip_path: '/proxy'
  match:
    url: 'https://core.prac.io/proxy/accounts/<{registration,welcome,recovery,verification,login,**.css,**.js,**.png}>'
    methods:
      - GET
  authenticators:
    - handler: anonymous
  authorizer:
    handler: allow
  mutators:
    - handler: noop
- id: 'ory:kratos-accounts:protected'
  upstream:
    preserve_host: true
    url: 'http://vue-acc-service.svc.default.cluster.local'
    strip_path: '/proxy'
  match:
    url: 'https://core.prac.io/proxy/accounts/<{app,debug,dashboard,settings}{/,}>'
    methods:
      - GET
  authenticators:
    - handler: cookie_session
  authorizer:
    handler: allow
  mutators:
    - handler: id_token
  errors:
    - handler: redirect
      config:
        to: 'https://core.prac.io/proxy/accounts/login' 
